package com.fashion.binge.fashiondesign;import android.content.SharedPreferences;import android.content.pm.ActivityInfo;import android.graphics.Color;import android.os.Bundle;import android.preference.PreferenceManager;import android.support.design.widget.CoordinatorLayout;import android.support.design.widget.Snackbar;import android.support.v7.app.AppCompatActivity;import android.support.v7.widget.Toolbar;import android.view.MenuItem;import android.view.View;import android.widget.EditText;import android.widget.ImageView;import android.widget.TextView;import com.fashion.binge.fashiondesign.classes.SetStatusBarColor;import com.fashion.binge.fashiondesign.classes.Utils;import com.fashion.binge.fashiondesign.interfaces.AccessTokenInfoHolder;import com.fashion.binge.fashiondesign.interfaces.ResponseInfoHolder;import com.fashion.binge.fashiondesign.json.EditProfileAccount;import com.fashion.binge.fashiondesign.shared_preference.SharedPrefrenceInfo;import com.fashion.binge.fashiondesign.sweetalertdialog.SweetAlertDialog;public class EditProfile extends AppCompatActivity {    private Toolbar toolbar;    private TextView toolbarTitle;    private SharedPreferences sharedPreferences;    private EditText firstName, lastName, email, phoneNumber;    private ImageView cart,notification;    private CoordinatorLayout coordinatorLayout;    private TextView cartNumber,notificationNumber;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_edit_profile);        if (!Homepage.isTablet(this)) {            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);        }        initialiseLayout();        setSupportActionBar(toolbar);        //noinspection ConstantConditions        getSupportActionBar().setDisplayHomeAsUpEnabled(true);        SetStatusBarColor.setStausBarColor(this);        toolbarTitle.setText(R.string.edit_profile);        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);        cartNumber.setVisibility(View.GONE);        notification.setVisibility(View.GONE);        notificationNumber.setVisibility(View.GONE);        cart.setImageResource(R.mipmap.tick);        cart.setColorFilter(Color.argb(255, 255, 255, 255));        cart.setAdjustViewBounds(true);        cart.setMaxHeight(55);        cart.setPadding(0, 15, 0, 0);        firstName.setText(sharedPreferences.getString(SharedPrefrenceInfo.FIRST_NAME, ""));        lastName.setText(sharedPreferences.getString(SharedPrefrenceInfo.LAST_NAME, ""));        email.setText(sharedPreferences.getString(SharedPrefrenceInfo.EMAIL, ""));        phoneNumber.setText(sharedPreferences.getString(SharedPrefrenceInfo.TELEPHONE, ""));        cart.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                if (firstName.getText().toString().equals("") || lastName.getText().toString().equals("") || email.getText().toString().equals("") || phoneNumber.getText().toString().equals("")) {                    Snackbar snackbar = Snackbar.make(coordinatorLayout, "All fields are mandatory", Snackbar.LENGTH_SHORT);                    View view = snackbar.getView();                    view.setBackgroundColor(Color.parseColor("#f66d63"));                    snackbar.show();                } else {                    editProfileInfo();                }            }        });    }    private void editProfileInfo() {        final SweetAlertDialog sweetAlertDialog = new SweetAlertDialog(EditProfile.this, SweetAlertDialog.PROGRESS_TYPE);        sweetAlertDialog.getProgressHelper().setBarColor(Color.parseColor("#F6705E"));        sweetAlertDialog.setTitleText("Editing your profile");        sweetAlertDialog.show();        new EditProfileAccount(EditProfile.this).setEditprofile(sweetAlertDialog, email.getText().toString(), firstName.getText().toString(), lastName.getText().toString(), phoneNumber.getText().toString(), sharedPreferences.getString(SharedPrefrenceInfo.TOKEN_TYPE, "") + " " + sharedPreferences.getString(SharedPrefrenceInfo.IS_TOKEN_VALID, ""), new ResponseInfoHolder() {            @Override            public void setFollowingInfo(String success, String data) {                if (success.equals("401")) {                    Utils.setTokenInfo(EditProfile.this, sweetAlertDialog, new AccessTokenInfoHolder() {                        @Override                        public void setAcessTokenInfo(String accessToken, String expires_in, String token_type) {                            sweetAlertDialog.dismissWithAnimation();                            editProfileInfo();                        }                    });                } else {                    if (success.equals("true")) {                        sweetAlertDialog.changeAlertType(SweetAlertDialog.SUCCESS_TYPE);                        sweetAlertDialog.setTitleText("Successfully edited profile");                    } else {                        sweetAlertDialog.changeAlertType(SweetAlertDialog.WARNING_TYPE);                        sweetAlertDialog.setTitleText(data);                    }                }            }        });    }    private void initialiseLayout() {        toolbar = (Toolbar) findViewById(R.id.toolbar);        toolbarTitle = (TextView) findViewById(R.id.toolbar_title);        firstName = (EditText) findViewById(R.id.first_name);        lastName = (EditText) findViewById(R.id.last_name);        email = (EditText) findViewById(R.id.email);        phoneNumber = (EditText) findViewById(R.id.phone_number);        cart = (ImageView) findViewById(R.id.cart);        coordinatorLayout = (CoordinatorLayout) findViewById(R.id.coordinator_layout);        cartNumber=(TextView)findViewById(R.id.cart_number);        notification=(ImageView)findViewById(R.id.notification);        notificationNumber=(TextView)findViewById(R.id.notification_number);    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        int id = item.getItemId();        if (id == android.R.id.home) {            finish();            return true;        }        return super.onOptionsItemSelected(item);    }}